{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{player_one}} vs {{player_two}} | #{{potential_wining}}</title>
    <link rel="icon" href="{% static 'image/logo.png' %}">
    <link rel="stylesheet" href="{% static 'css/gtt.css' %}">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>


<body style="background-color:#131311">


    <!-- Navbar for Medium and Bigger Screen Sizes -->
    <div class="top-navbar"  style="background-color:#c9bf0b">
        <div class="row">
              <div class="col-md-4 text-center">
                  <b class="text-danger">{{player_one}}</b>:
                  <b class="text-primary">{{player_one_count}}</b>
              </div>
              <div class="col-md-4 text-center">
                  <p id="gtt">VS</p>
              </div>
              <div class="col-md-4 text-center">
                  <b class="text-danger">{{player_two}}</b>:
                  <b class="text-primary">{{player_two_count}}</b>
              </div>
        </div>
    </div>
  <!-- End of Larger Screen Navbar -->





  <section class="text-center text-white">
      {% if round <= 4 %}
            <h1 class="display-6 text-secondary">Round:<b style="color:pink">{{round}}</b></h1>
      {% endif %}
      <p class="text-secondary text-center" style="font-size:30px">Possible Wining Amount <b class="text-primary">#{{potential_wining}}</b></p>

<!--      GAME STARTING SETUP-->

      {% if not game_tie %}
                        {% if  found_a_winner %}
                       {% if round <= 4 %}
<!--                    WhatsApp Chat Opponent-->
                     <a class="btn btn-outline-primary" href="{{opponent_whatsapp_link}}">Chat With '{{opponent}}' on WhatsApp</a>
                     <hr style="border:3px solid white">
                             <!--      SENDER-->
                      {% if sender == user.username %}
                      <ul style="font-size:15px12">
                          <li class="text-danger text-center">Please Do Not Leave The Game Room</li>
                          <li class="text-danger text-center">Make Sure You Have A Good Internet Connection</li>
                          <li class="text-danger text-center">Only Whole Number Required,Number(s) After The Decimal Point Is Ignored</li>
                          <li class="text-danger text-center">Numbers Between 0 and 99 Required Only</li>
                      </ul>
                      <hr style="border:3px solid white">
                          {% if not has_received %}
                            {% if not has_sent %}
                                <p class="text-warning text-center" style="font-size:20px">Create Your Golden Number</p>
                                      <form action="/game/senderNumbersCollation" method="post" enctype="multipart/form-data" id="sender_form" onsubmit="sendGoldenNumbers()">
                                          {% csrf_token %}
                                          <div class="row">
                                              <div class="col-md-12">
                                                  <label class="text-center text-secondary ">First Number<b style="color:red">*</b></label><br>
                                                  <input type="number" min="0" max="99" name="sender_first_number" id="sender_first_number" onchange="checkSenderFirstNumber()" class="sender-button-gtt text-center my-2" placeholder="0-99" required>
                                              </div>
                                              <div class="col-md-12">
                                                  <label class="text-center text-secondary ">Sign<b style="color:red">*</b></label><br>
                                                  <select class="sender-button-gtt text-center" name="sender_sign" required id="sender_sign">
                                                      <option selected>Addition</option>
                                                      <option>Multiplication</option>
                                                  </select>
                                              </div>
                                              <div class="col-md-12">
                                                  <label class="text-center text-secondary ">second Number<b style="color:red">*</b></label><br>
                                                  <input type="number" min="0" max="99" name="sender_second_number" id="sender_second_number" onchange="checkSenderSecondNumber()" class="sender-button-gtt text-center my-2" placeholder="0-99" required>
                                              </div>
                                              <div class="col-md-12">
                                <!--                  <label class="text-center text-warning">Generate Gold</label>-->
                                                  <input type="button" onclick="generateGold()" id="generate_gold_check_box" style="display:none" class="btn btn-outline-warning" value="Generate Your Gold" required>
                                              </div>
                                              <div class="col-md-12" id="golden_number_space">
                                <!--                  <input type="number" min="0" max="99" name="sender_golden_number" id="sender_golden_number" class="sender-button-gtt text-center my-2 bg-warning" required>-->
                                              </div>
                                              <div class="col-md-12">
                                                  <label class="text-center text-secondary ">Random Number<b style="color:red">*</b></label><br>
                                                  <input type="number" min="0" max="10000" name="sender_random_number" id="sender_random_number" class="sender-button-gtt text-center my-2" placeholder="0 - 10,000"  required>
                                              </div>
                                              <div class="col-md-12">
                                                  <label class="text-center text-secondary ">Second Random Number<b style="color:red">*</b></label><br>
                                                  <input type="number" min="0" max="10000" name="sender_second_random_number" id="sender_second_random_number" class="sender-button-gtt text-center my-2" placeholder="0 - 10,000"  required>
                                              </div>
                                              <div class="col-md-12">
                                                  <label class="text-center text-secondary ">Third Random Number<b style="color:red">*</b></label><br>
                                                  <input type="number" min="0" max="10000" name="sender_third_random_number" id="sender_third_random_number" class="sender-button-gtt text-center my-2" placeholder="0 - 10,000"  required>
                                              </div>
                                              <div class="col-md-12">
                                                  <input type="submit" id="sender_submit" style="display:none" class="btn btn-outline-warning my-2 px-3" value="Shuffle and Send">
                                              </div>

                                              <div id="sender_spinner" style="display:none">
                                                <div class="d-flex justify-content-center">
                                                    <button class="btn text-center btn-outline-warning" type="button" disabled>
                                                        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                                        Shuffling And Sending...
                                                    </button>
                                                </div>
                                            </div>
                                          </div>
                                      </form>
                            {% else %}
                                <p class="text-center text-secondary my-5" style="font-size:30px">Waiting For {{opponent}}'s answer</p>
                                <div id="show_sender_numbers">
                                    <input type="button" class="btn btn-outline-warning" value="Show My Numbers" onclick="showSenderNumbers()">
                                </div>
                                <div id="hide_sender_numbers" style="display:none">
                                    <input type="button" class="btn btn-outline-warning" value="Hide My Numbers" onclick="hideSenderNumber()">
                                </div>
                                <div id="sender_numbers" style="display:none">
                                    <div class="row">
                                    <div class="col-md-12">
                                        <label class="text-center text-secondary ">Your First Number</label><br>
                                        <input type="number" min="0" max="99"  class="sender-button-gtt text-center my-2" placeholder="0-99" disabled value="{{sender_first_number}}">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="text-center text-secondary ">Your Sign</label><br>
                                        <input type="text" min="0" max="99"  class="sender-button-gtt text-center my-2" placeholder="0-99" disabled value="{{sign}}">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="text-center text-secondary ">Your Second Number</label><br>
                                        <input type="number" min="0" max="99"  class="sender-button-gtt text-center my-2" placeholder="0-99" disabled value="{{sender_second_number}}">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="text-center text-secondary ">Your Golden Number</label><br>
                                        <input type="number" min="0" max="99"  class="sender-button-gtt text-center my-2 bg-warning" placeholder="0-99" disabled value="{{sender_golden_number}}">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="text-center text-secondary ">Your First Random Number</label><br>
                                        <input type="number" min="0" max="99"  class="sender-button-gtt text-center my-2" placeholder="0-99" disabled value="{{sender_random_number}}">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="text-center text-secondary ">Your Second Random Number</label><br>
                                        <input type="number" min="0" max="99"  class="sender-button-gtt text-center my-2" placeholder="0-99" disabled value="{{sender_second_random_number}}">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="text-center text-secondary ">Your Third Random Number</label><br>
                                        <input type="number" min="0" max="99"  class="sender-button-gtt text-center my-2" placeholder="0-99" disabled value="{{sender_third_random_number}}">
                                    </div>
                                </div>
                                </div>
                                <p class="text-center text-secondary my-5" style="font-size:30px">Waiting For {{opponent}}'s answer</p>
                                <a href="" class="btn btn-outline-warning">Connection Lags?<br>Refresh To Check '{{opponent}}''s Answer</a>
                                <hr style="border:3px solid white">
                                <h1 class=" my-3 text-center text-danger" style="font-size:20px">Please Do Not Report Unnecessarily Or You Will Be Fined!!</h1>
                                {% csrf_token %}
                                <a class="btn text-center btn-outline-danger" onclick="opponentDelay()">Report
                                    '{{opponent}}' Game Delay</a>
                            {% endif %}
                          {% else %}
                            {% if receiver_number == golden_number %}
                                <p class="text-center text-success display-6">Guessed Number '{{receiver_number}}': {{opponent}} Win <i class="fa fa-check text-success" aria-hidden="true"></i></p>
                                {% if sign == "Addition" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} + {{check_second_number}} = {{golden_number}}</h1>
                                {% elif sign == "Multiplication" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} * {{check_second_number}} = {{golden_number}}</h1>
                                {% endif %}
                                <p class="text-center text-secondary display-6">Waiting For {{opponent}} to continue...</p>
                                <a href="" class="btn btn-outline-warning">Connection Lags?<br>Refresh</a>
                                <hr style="border:3px solid white">
                                <h1 class=" my-3 text-center text-danger" style="font-size:20px">Please Do Not Report Unnecessarily Or You Will Be Fined!!</h1>
                                {% csrf_token %}
                                <a class="btn text-center btn-outline-danger" onclick="opponentDelay()">Report
                                    '{{opponent}}' Game Delay</a>
                            {% else %}
                                <h1 class="text-center text-danger display-6">Guessed Number '{{receiver_number}}': {{opponent}} Loss <i class="fa fa-window-close" aria-hidden="true"></i></h1>
                                {% if sign == "Addition" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} + {{check_second_number}} = {{golden_number}}</h1>
                                {% elif sign == "Multiplication" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} * {{check_second_number}} = {{golden_number}}</h1>
                                {% endif %}
                                    <p class="text-center text-secondary display-6">Waiting For {{opponent}} to continue...</p>
                                    <a href="" class="btn btn-outline-warning">Connection Lags?<br>Refresh</a>
                                    <hr style="border:3px solid white">
                                    <h1 class=" my-3 text-center text-danger" style="font-size:20px">Please Do Not Report Unnecessarily Or You Will Be Fined!!</h1>
                                    {% csrf_token %}
                                    <a class="btn text-center btn-outline-danger" onclick="opponentDelay()">Report
                                    '{{opponent}}' Game Delay</a>
                      {% endif %}
                          {% endif %}
                      {% endif %}
                      <!--      End Sender-->


                      <!--      RECEIVER-->
                      {% if receiver == user.username %}
                      <ul style="font-size:15px;">
                          <li class="text-danger text-center">Please Do Not Leave The Game Room</li>
                          <li class="text-danger text-center">Make Sure You Have A Good Internet Connection</li>
                      </ul>
                      <hr style="border:3px solid white">
                         {% if not has_received %}
                                {% if has_sent %}
                                  {% if sign == "Addition" %}
                                      <div class="col-md-12 my-2">
                                          <button id="sign">Hint<br><i class="text-danger">+</i><br>Two Numbers<br> Are "Added" Together</button>
                                      </div>
                                  {% elif sign == "Multiplication" %}
                                      <div class="col-md-12 my-2">
                                          <button id="sign">Hint<br><i class="text-danger">*</i><br>Two Numbers<br> Are "Multiplied" Together</button>
                                      </div>
                                  {% endif %}
                                    <p class="text-warning text-center" style="font-size:20px">Guess {{opponent}}'s Golden Number</p>

<!--                                First Row-->
                                <div class="row">
                            <!--          First Number Form-->
                                    <form action="/game/receiverFirstNumber" method="post" enctype="multipart/form-data" class="col-6 my-2 receiver_form" onsubmit="receiverForm()">
                                        {% csrf_token %}
                                        <input type="number" name="receiver_first_number" value="{{first_number}}" hidden>
                                        <input type="submit" class="receiver-button-gtt receiver_form_button" value="{{first_number}}">
                                    </form>

                            <!--          Second Number Form-->
                                    <form action="/game/receiverSecondNumber" method="post" enctype="multipart/form-data" class="col-6 my-2 receiver_form" onsubmit="receiverForm()">
                                        {% csrf_token %}
                                        <input type="number" name="receiver_second_number" value="{{second_number}}" hidden>
                                        <input type="submit" class="receiver-button-gtt receiver_form_button" value="{{second_number}}">
                                    </form>
                                </div>

<!--                                Second Row-->
                                <div class="row">
                            <!--          Third Number Form-->
                                    <form action="/game/receiverThirdNumber" method="post" enctype="multipart/form-data" class="col-6 my-2 receiver_form" onsubmit="receiverForm()">
                                        {% csrf_token %}
                                        <input type="number" name="receiver_third_number" value="{{third_number}}" hidden>
                                        <input type="submit" class="receiver-button-gtt receiver_form_button" value="{{third_number}}">
                                    </form>

                            <!--          Fourth Number Form-->
                                    <form action="/game/receiverFourthNumber" method="post" enctype="multipart/form-data" class="col-6 my-2 receiver_form" onsubmit="receiverForm()">
                                        {% csrf_token %}
                                        <input type="number" name="receiver_fourth_number" value="{{fourth_number}}" hidden>
                                        <input type="submit" class="receiver-button-gtt receiver_form_button" value="{{fourth_number}}">
                                    </form>
                                </div>

<!--                                Fifth Row-->
                                <div class="row">
<!--                                    Fifth Number Form-->
                                    <form action="/game/receiverFifthNumber" method="post" enctype="multipart/form-data" class="col-6 my-2 receiver_form" onsubmit="receiverForm()">
                                        {% csrf_token %}
                                        <input type="number" name="receiver_fifth_number" value="{{fifth_number}}" hidden>
                                        <input type="submit" class="receiver-button-gtt receiver_form_button" value="{{fifth_number}}">
                                    </form>

<!--                                    Sixth Number-->
                                    <form action="/game/receiverSixthNumber" method="post" enctype="multipart/form-data" class="col-6 my-2 receiver_form" onsubmit="receiverForm()">
                                        {% csrf_token %}
                                        <input type="number" name="receiver_sixth_number" value="{{sixth_number}}" hidden>
                                        <input type="submit" class="receiver-button-gtt receiver_form_button" value="{{sixth_number}}">
                                    </form>
                                </div>
                         </div>
                        <div>
                            <a href="" class="btn btn-outline-warning p-3">Shuffle Numbers</a>
                        </div>
                              {% else %}
                                    <p class="text-center text-secondary my-5" style="font-size:30px">{{opponent}}'s Turn To Play,Please Wait...</p>
                                    <a href="" class="btn btn-outline-warning">Connection Lag?<br>Refresh To Check '{{opponent}}''s Numbers</a>
                                    <hr style="border:3px solid white">
                                    <h1 class=" my-3 text-center text-danger" style="font-size:20px">Please Do Not Report Unnecessarily Or You Will Be Fined!!</h1>
                                    {% csrf_token %}
                                    <a class="btn text-center btn-outline-danger" onclick="opponentDelay()">Report
                                    '{{opponent}}' Game Delay</a>
                              {% endif %}
                         {% else %}
                            {% if receiver_number == golden_number %}
                                <p class="text-center text-success display-6">Guessed Number '{{receiver_number}}': You Win <i class="fa fa-check text-success" aria-hidden="true"></i></p>
                                {% if sign == "Addition" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} + {{check_second_number}} = {{golden_number}}</h1>
                                {% elif sign == "Multiplication" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} * {{check_second_number}} = {{golden_number}}</h1>
                                {% endif %}
                                <a href="{% url 'next_round_page' %}" class="btn btn-outline-warning">Continue</a>
                            {% else %}
                                <h1 class="text-center text-danger display-6">Guessed Number '{{receiver_number}}': You Loss <i class="fa fa-window-close" aria-hidden="true"></i></h1>
                                {% if sign == "Addition" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} + {{check_second_number}} = {{golden_number}}</h1>
                                {% elif sign == "Multiplication" %}
                                    <h1 class="text-center text-success display-6">{{check_first_number}} * {{check_second_number}} = {{golden_number}}</h1>
                                {% endif %}
                                <a href="{% url 'next_round_page' %}" class="btn btn-outline-warning">Continue</a>
                            {% endif %}
                         {% endif %}
                      {% endif %}
                      <!--      End Receiver-->
                       {% else %}
                            {% if player_one == user.username %}
                                {% csrf_token %}
                                <a class="btn btn-outline-warning my-5" onclick="finishRound()" id="finish_round_button">Finish Round and Detect Cheat</a>
                            {% else%}
                                <h1 class="display-6 text-center text-secondary my-5">Waiting For {{opponent}} To Finish Round</h1>
                                <a href="" class="btn btn-outline-warning">Connection Lags?<br>Refresh</a>
                                <hr style="border:3px solid white">
                                <h1 class=" my-3 text-center text-danger" style="font-size:20px">Please Do Not Report Unnecessarily Or You Will Be Fined!!</h1>
                                {% csrf_token %}
                                <a class="btn text-center btn-outline-danger" onclick="opponentDelay()">Report
                                    '{{opponent}}' Game Delay</a>
                            {% endif %}
                                <div id="finish_round_spinner" style="display:none">
                                    <div class="d-flex justify-content-center">
                                                    <button class="btn text-center btn-outline-warning" type="button" disabled>
                                                        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                                                        Compiling Results and Detecting Cheats...
                                                    </button>
                                    </div>
                                </div>
                       {% endif %}
          {% else %}
                {% if winner == user.username %}
                    <h1 class="text-center display-6 text-success my-5">You Win #{{potential_wining}}</h1><br>
                    <img src="{% static 'image/WIN_GIF.gif' %}" class="img-fluid rounded-circle my-3" style="width:150px;height:150px"><br>
                    {% csrf_token %}
                    <a class="btn btn-outline-warning" onclick="endGame()">End Game</a>
                {% else %}
                    <h1 class="text-center display-6 text-danger my-5">You Loss </h1>
                    <img src="{% static 'image/LOSS_GIF.gif' %}" class="img-fluid rounded-circle my-3" style="width:150px;height:150px"><br>
                    {% csrf_token %}
                    <a class="btn btn-outline-warning" onclick="endGame()">End Game</a>
                {% endif %}
          {% endif %}
      {% else %}
            <h1 class="display-6 text-center text-secondary">There Is A Tie GAME</h1>
            <img src="{% static 'image/BREAK_EVEN_GIF.gif' %}" class="img-fluid rounded-circle my-3" style="width:150px;height:150px"><br>
            {% csrf_token %}
            <a class="btn btn-outline-warning" onclick="endGame()">End Game</a>
      {% endif %}


  </section>



    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/gtt.js' %}"></script>
    <script>
        function showSenderNumbers(){
            var getSenderNumbers = document.getElementById("sender_numbers");
            getSenderNumbers.style.display = "inline";
            var getHideSenderNumbers = document.getElementById("hide_sender_numbers");
            getHideSenderNumbers.style.display = "inline";
            var getShowSenderNumbers = document.getElementById("show_sender_numbers");
            getShowSenderNumbers.style.display = "none";
        }

        function hideSenderNumber(){
            var getSenderNumbers = document.getElementById("sender_numbers");
            getSenderNumbers.style.display = "none";
            var getHideSenderNumbers = document.getElementById("hide_sender_numbers");
            getHideSenderNumbers.style.display = "none";
            var getShowSenderNumbers = document.getElementById("show_sender_numbers");
            getShowSenderNumbers.style.display = "inline"
        }
    </script>
</body>
</html>